# 612WAVE

## Cодержание документа

- О проекте
- Запуск
- Описание комплектации проекта
- Как пользоваться приложением

## О проекте

Данный проект представляет из себя оконное приложение, совмещающее в себе аудиоредактор и аудиоплеер. Вам будут представлены самые необходимые функции по работе с аудиофайлами разных форматов с точки зрения редактора и классический функционал с точки зрения аудиоплеера. Приложение изготовлено новичком и имеет некоторые заметные технические недочёты(смотреть раздел "Проблемы работы проекта") а также оригинальные решения в некоторых областях. Код написан на языке python версии 3.9.

## Запуск

Запуск может быть осуществлён двумя способами(мы рекомендуем вам второй):

### Способ 1

#### Штатная установка

Разместите в файловой системе вашего компьютера файл "main.exe"(он находится в папке main, которая лежит в папке dist проекта), в одну папку с ним установите файлы "612WAVE_db.db" и "default_playlist_image.jpg" - они необходимы для работы программы. Затем запустите файл "main.exe" и можете пользоваться проектом.

#### Возможные сложности и устранение ошибок с файлами

Не удаляйте файлы "612WAVE_db.db" и "default_playlist_image.jpg", а если вы это сделали и запустили файл "main.exe" или не разместили их в папке с "main.exe" изначально и опять же запустили последний файл, то в вашей папке появится файл с названием "612WAVE_db.db", имеющий размер 0 байт. Удалите его и разместите в папке файл "default_playlist_image.jpg" а также файл "612WAVE_db.db", идущий в комплектации проекта.

#### Описание проблем способа

Этот способ не рекомендуется к использованию из-за более низкой скорости работы программы, нежели при запуске вторым способом и вылетающих на мгновение пустых окон при выполнении большинства действий в проекте.

### Способ 2

В среде разработки PyСharm откройте наш проект. Введите в терминал такую команду:

```commandline
pip install -r requirements.txt
```

Вы установили все необходимые библиотеки. Теперь запустите файл "main.py".

## Описание комплектации проекта

#### Функциональные файлы

##### Файлы с python кодом

"main.py" - запуск класса MainWindow из импортированного файла "MainWindowCode.py" в виде оконного приложения.

"MainWindowCode.py" - задаёт поведение частей главного окна приложения, в том числе импорт и вызов всех классов (CreatePlaylistForm, ConnectionForm, ChangeSpeedStepForm, CutPartForm, ChangeMetadataForm), отвечающих за работу дополнительных окон из соответствующих файлов ("CreatePlaylistFormCode.py", "ConnectionFormCode.py", "ChangeSpeedStepFormCode.py", "CutPartFormCode.py", "ChangeMetadataFormCode.py"), связь с базой данных и воспроизведение аудио. Сюда импортируется класс MainWindowDesign из файла "MainWindowDesign.py" и кдассы PlaylistsCustomListWidget и SongsCustomListWidget из файла "CustomListWidgets.py".

"MainWindowDesign.py" - содержит единственный класс MainWindowDesign, кодирующий дизайн для класса MainWindow из файла "MainWindowCode.py".

"CustomListWidgets.py" - содержит классы PlaylistsCustomListWidget и SongsCustomListWidget, реализующие работу функции работы классических QListWidget-ов из PyQt6 но имеющих дополнительные функции. Классы имеют связь с базой данных.

"CreatePlaylistFormCode.py" - содержит единственный класс ChangeMetadataForm, кодирующий поведение дополнительного окна, отвечающего за создание плейлистов ("СОЗДАТЬ ПЛЕЙЛИСТ"). Сюда импортируется класс CreatePlaylistFormDesign из файла "CreatePlaylistFormDesign.py". Единственный класс этого файла имеет поле с объектом главного окна (класс MainWindow) и может выполнять действия над базой данных.

"CreatePlaylistFormDesign.py" - содержит единственный класс CreatePlaylistFormDesign, кодирующий дизайн для класса CreatePlaylistForm из файла "CreatePlaylistFormCode.py".

"ConnectionFormCode.py" - содержит единственный класс ConnectionForm, кодирующий поведение дополнительного окна, отвечающего за слияние аудиофайлов ("СЛИЯНИЕ"). Сюда импортируется класс ConnectionFormDesign из файла "ConnectionFormDesign.py".

"ConnectionFormDesign.py" - содержит единственный класс ConnectionFormDesign, кодирующий дизайн для класса ConnectionForm из файла "ConnectionFormCode.py".

###### Аналогично дополнительному окну, отвечающему за слияние аудиофайлов ("СЛИЯНИЕ") строится структура файлов остальных четырёх дополнительных окон. Их описание идёт далее.

"ChangeSpeedStepFormCode.py" - содержит единственный класс ChangeSpeedStepForm, кодирующий поведение дополнительного окна, отвечающего за изменение скорости и/или частоты аудиофайлов ("ИЗМЕНЕНИЕ СКОРОСТИ И ЧАСТОТЫ(ШАГА)"). Сюда импортируется класс ChangeSpeedStepFormDesign из файла "ChangeSpeedStepFormDesign.py".

"ChangeSpeedStepFormDesign.py" - содержит единственный класс ChangeSpeedStepFormDesign, кодирующий дизайн для класса ChangeSpeedStepForm из файла "ChangeSpeedStepFormCode.py".

"CutPartFormCode.py" - содержит единственный класс CutPartForm, кодирующий поведение дополнительного окна, отвечающего за создание из части аудиофайла другого аудиофайла ("ИЗВЛЕЧЕНИЕ ЧАСТИ ИЗ ФАЙЛА"). Сюда импортируется класс CutPartFormDesign из файла "CutPartFormDesign.py".

"CutPartFormDesign.py" - содержит единственный класс CutPartFormDesign, кодирующий дизайн для класса CutPartForm из файла "CutPartFormCode.py".

"ChangeMetadataFormCode.py" - содержит единственный класс ChangeMetadataForm, кодирующий поведение дополнительного окна, отвечающего за изменение метадаты файлов формата ".mp3" ("ИЗМЕНЕНИЕ МЕТАДАТЫ mp3 ФАЙЛОВ"). Сюда импортируется класс ChangeMetadataFormDesign из файла "ChangeMetadataFormDesign.py".

"ChangeMetadataFormDesign.py" - содержит единственный класс ChangeMetadataFormDesign, кодирующий дизайн для класса ChangeMetadataForm из файла "ChangeMetadataFormCode.py".

##### Остальные функциональные файлы

"612WAVE_db.db" - файл базы данных проекта.

"default_playlist_image.jpg" - картинка для иконки плейлистов по умолчанию.

"special_audiofile_container.mp3" и "redactor_audiofile_container.mp3" - файлы, в которые сохраняются промежуточные аудиофайлы, получающиеся при выполнении разнообразных функций над аудиофайлами. Вы можете их удалять, но они будут сами создаватся каждый раз, когда понадобятся.

папка "output" и папка "build" - папки, созданные pyinstaller-ом при сборке файла "main.exe", имеют классическое содержимое для этих папок.

папка ".idea" и папка "\_\_pycache\_\_" - папки, созданные PyCharm при создании проекта. Разработчиками проекта эти файлы не были затронуты никоим образом.

папка "dist" - внутри неё единственная папка "main", в ней файл "main.exe", с помощью которого можно запустить программу первым способом. Там же, где и "main.exe" находится папка "_internal", она не подлежала редакции со стороны разработчиков и аналогично с "main.exe" была создана pyinstaller-ом.

#### Дополнительные файлы

"ConnectionFormDesignUi.ui" - из этого файла с помощью pyuic6 был создан файл "ConnectionFormDesign.py".

"ChangeSpeedStepFormDesignUi.ui" - из этого файла с помощью pyuic6 был создан файл "ChangeSpeedStepFormDesign.py".

"CutPartFormDesignUi.ui" - из этого файла с помощью pyuic6 был создан файл "CutPartFormDesign.py".

"ChangeMetadataFormDesignUi.ui" - из этого файла с помощью pyuic6 был создан файл "ChangeMetadataFormDesign.py".

.ui файлы, из которых были созданы файлы "MainWindowDesign.py" и "CreatePlaylistFormDesign.py" - утеряны.

## Как пользоватся программой

### Окна приложения

Приложение имеет главное окно, которое открывается при запуске приложения, из него могут открываться дополнительные окна. При закрытии главного окна все дополнительные закрываются.

### Функции приложения

#### Функции плеера

###### Переключение в режим редактора

Для переключения главного окна в режим редактора нажмите на кнопку `РЕДАКТОР`. Для того, чтобы вернутся в режим плеера, нажмите на эту кнопку повторно, только в режиме редактора её текст меняется на `ПЛЕЕР`.

###### Настройки

Пока настройки отсутствуют, соответствующая кнопка `НАСТРОЙКИ` не выполняет действий при нажатии.

###### Помощь

Для получения инструкции по работе с проектом нажмите на кнопку `ПОМОЩЬ`, текст на ней заменится на "откройте файл "README.md"", этот файл вы читаете сейчас.

###### Добавление плейлиста

Чтобы создать плейлист, нажмите на кнопку `Добавить плейлист` в верхней части окна.

Откроется дополнительное окно для создания плейлиста, в нём впишите название для нового плейлиста и можете выбрать из ваших файлов картинку для плейлиста с помощью нажатия на кнопку `Выбрать файл`. В маленьком текстовом поле появится путь к выбранной картинке, а сама картинка появится в нижней левой части окна. Нажмите кнопку `Создать` чтобы завершить создание. Если вы не выбрали картинку для плейлиста будет установлена картинка по умолчанию. Плейлист будет сохранён в базе данных. В случае возникновения ошибок в нижней части окна появится оповещающее текстовое поле, указывающее причину ошибки.

###### Удаление плейлиста

Чтобы удалить плейлист, нажмите на него правой кнопкой мыши - при этом появится меню с единственной опцией `Удалить`, нажмите на неё. Плейлист удалён. Его данные стёрты из базы данных.

###### Открытие плейлиста

Чтобы открыть плейлист, нажмите на него (только не правой кнопкой мыши). Все песни, находящиеся в этом плейлисте будут загружены в виде списка в центральной правой области главного окна. Над списком и кнопкой `Добавить песню в плейлист` появится название открытого плейлиста. Каждый раз при открытии плейлиста его песни будут загружаться в список из базы данных. 

###### Добавление песни в открытый плейлист

Если вы хотите добавить песню из ваших файлов в плейлист, который сейчас открыт, нажмите на кнопку `Добавить песню в плейлист` и выберите песню из файлов. Приложение воспроизводит файлы форматов `.wav`, `.mp3`, `.flac`, `.aac`, `.ogg`, `.oga`, мы не гарантируем, что файлы другого формата программа сможет обработать. При возникновении ошибок вы уведите строку с текстом, предупреждающую об ошибке, под кнопкой `Добавить песню в плейлист`.

###### Открытие и воспроизведение песни из плейлиста

Чтобы получить доступ к прослушиванию песни, находящейся в вашем плейлисте, вам нужно открыть плейлист и нажать на песню, которую вы хотите открыть.
В нижней части главного окна появится блок по управлению воспроизведения песни. Слева появится картинка обложки альбома песни, если она имеется, правее вы увидите название песни и слайдер, показывающий на каком моменте воспроизведение. Ещё правее ниже располагаются указатель длительности аудиофайла в секундах, над ним указатель на время воспроизведения в настоящий момент. Кнопкой `▶` вы можете начать воспроизведение с момента, на котором сейчас находится ползунок слайдера или остановить воспроизведение. При перемещении ползунка слайдера мышью воспроизведение останавливается. С двух сторон от кнопки `▶`, находятся парные кнопки `<<5c` и `5c>>`, отвечающие соответственно за перемотку воспроизведения назад на 5 секунд и вперёд на 5 секунд соответственно. Под этими кнопками находятся соответственно кнопки `|◀` и `▶|`, с помощью которых вы можете переключится соответственно на предыдущую и следующую песню в этом плейлисте.

Как только ползунок слайдера доходит до крайнего правого значения, автоматически происходит переключение на следующую песню этого плейлиста. Когда песни плейлиста кончаются, воспроизведение останавливается. Если переключиться на следующую или предыдущую песню при остановленном воспроизведении, оно таким и останется, аналогично с включенным воспроизведением.

#### Функции редактора

При переключении в режим редактора блок по управлению воспроизведением песен останется на месте, возможность переключатся с помощью кнопок `|◀` и `▶|` между песен плейлиста сохраняется.

Вашим глазам представлено меню из восьми кнопок, каждая одну функцию редактора и открывает дополнительное окно, которое за эту функцию отвечает. Из восьми функций разработчиками сделаны только четыре, остальные кнопки не несут за собой функционала. Все функции кроме изменения метадаты поддерживают эти форматы: `.wav`, `.mp3`, `.flac`, `.aac`, `.ogg`, `.oga`. Остальные форматы могут вызывать ошибки.

###### Слияние аудиофайлов

Окно открывается кнопкой `СЛИЯНИЕ`. Здесь вы можете выбрать два файла и слить их в один(2 исходных файла при этом не изменяются). Вы можете выбрать для выходного файла формат и скопировать в него метадату из первого или второго исходного файла.

Нажмите на кнопку `Выберите 1-ый файл` чтобы выбрать первый файл и кнопку `Выберите 2-ой файл` для второго файла соответственно.
Нажмите на кнопку `Выберите расположение для выходного файла` и выберите расположение для файла, который получится при слиянии, также укажите его будущее название во всплывающем окне с выбором расположения. Пишите название без точки и расширения на конце. Расширение(формат) для выходного файла вы можете выбрать в вываливающемся списке около текста `Формат`. В вываливающемся списке около текста `Метадата` вы можете выбрать, получит итоговый файл метадату от первого файла или от второго.
Всё готово, нажмите кнопку `СЛИТЬ И СКАЧАТЬ` чтобы осуществить слияние и скачать файл. О возникающих ошибках вас будет информировать появляющаяся строка текста под кнопкой `Выберите расположение для выходного файла`.

ДАЛЕЕ ТОНКИЕ ПОТРОБНОСТИ В ИСПОЛЬЗОВАНИИ КНОПОК `Выберите файл` И `Выберите расположение для выходного файла` И ТЕКСТОВЫХ ПОЛЕЙ, ОТОБРАЖАЮЩИХ ОШИБКИ, БУДУТ ОПУЩЕНЫ ТАК КАК ЭТИ КНОПКИ РАБОТАЮТ АНАЛОГИЧНО ВО ВСЕХ ОСТАЛЬНЫХ ТРЁХ ДОПОЛНИТЕЛЬНЫХ ОКНАХ, КОТОРЫЕ БУДУТ ПЕРЕЧИСЛЕНЫ НИЖЕ.

###### Изменение скорости и/или частоты аудиофайла

Окно открывается кнопкой `ИЗМЕНЕНИЕ СКОРОСТИ И ЧАСТОТЫ(ШАГА)`. Здесь вы можете изменить скорость и/или частоту(в этом контексте её также называют высотой и шагом) выбранного аудиофайла.

Нажмите на кнопку `Выберите файл` чтобы выбрать исходный файл. Теперь вы можете изменить с помощью ползунков скорость и частоту аудиофайла, справа от этих слайдеров в текстовом окне будут отображаться значения изменения скорости(множитель скорости) и частоты(в полутонах). Вы можете ввести желаемые значения изменения скорости и частоты в эти текстовые поля самостоятельно(вы не ограничены шкалами слайдеров, но при слишком больших или малых значениях возможны ошибки или очень сильные искажения аудиофайлов). Нажмите на кнопку `Выберите расположение для выходного файла` и выберите расположение и имя для файла с изменёнными скоростью и/или частотой(исходный файл не претерпит изменений). В выпадающем списке около текстового поля `Формат` вы можете выбрать формат для итогового файла. Нажмите кнопку `СКАЧАТЬ`, чтобы скачать изменённый файл.  

###### Создание из части аудиофайла нового аудиофайла

Окно открывается кнопкой `ВЫРЕЗАТЬ ЧАСТЬ`. В этом окне вы можете создать аудиофайл из определённой части исходного аудиофайла.

Нажмите на кнопку `Выберите файл` чтобы выбрать исходный файл. Теперь вы можете выбрать с помощью двух ползунков слайдеров часть исходного аудиофайла, которая будет сохранена как аудиофайл. Обратите внимание, что справа от ползунков находятся текстовые поля, показывающие положение ползунка слайдера в виде "часы:минуты:секунды:миллисекунды". Длину выбранного фрагмента в том же виде вы можете увидеть около надписи `ДЛИНА ОТРЕЗКА`. Нажмите на кнопку `Выберите расположение для выходного файла` и выберите расположение и имя для файла(исходный файл не претерпит изменений). В выпадающем списке около текстового поля `Формат` вы можете выбрать формат для итогового файла. Нажмите кнопку `СКАЧАТЬ`, чтобы скачать получившийся файл.

###### Изменение метадаты файла

ВНИМАНИЕ, ЭТА ФУНКЦИЯ РАБОТАЕТ ТОЛЬКО С `.mp3` ФАЙЛАМИ.

Окно открывается кнопкой `ИЗМЕНЕНИЕ МЕТАДАТЫ`. В этом окне вы можете изменить некоторые из частей метадаты аудиофайла.

Нажмите на кнопку `Выберите файл` чтобы выбрать файл, метадата которого подвергнется изменению. Когда вы выберете файл, то вы сможете увидеть его картинку обложки альбома слева снизу, если там ничего не появилось, то таковой картинки аудиофайл не имеет. Вы можете установить новую картинку нажав на кнопку `Изменить картинку обложки альбома` и выбрав картинку. Она появится на своём месте. Также когда вы выберете файл, в окне появятся выпадающий список под текстом `Название поля метадаты` и текстовое поле с возможностью ввода под текстом `Значение поля метадаты`. Выберите из выпадающего списка текстовое поле метадаты и в текстовом поле справа вы увидите, какой текст там содержится, вы можете редактировать этот текст. Все изменения сохраняются автоматически с каждым изменённым символом.

## Желаем удачи и приятного пользования нашим проектом!